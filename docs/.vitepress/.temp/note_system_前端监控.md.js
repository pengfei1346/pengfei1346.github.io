import { ssrRenderAttrs, ssrRenderStyle } from "vue/server-renderer";
import { useSSRContext } from "vue";
import { _ as _export_sfc } from "./plugin-vue_export-helper.cc2b3d55.js";
const __pageData = JSON.parse('{"title":"前端监控","description":"","frontmatter":{"sidebar":null,"title":"前端监控"},"headers":[],"relativePath":"note/system/前端监控.md","filePath":"note/system/前端监控.md","lastUpdated":1713774468000}');
const _sfc_main = { name: "note/system/前端监控.md" };
function _sfc_ssrRender(_ctx, _push, _parent, _attrs, $props, $setup, $data, $options) {
  _push(`<div${ssrRenderAttrs(_attrs)}><h1 id="前端监控" tabindex="-1">前端监控 <a class="header-anchor" href="#前端监控" aria-label="Permalink to &quot;前端监控&quot;">​</a></h1><ul><li><a href="https://zhuanlan.zhihu.com/p/669133925" target="_blank" rel="noreferrer">15个UI测试工具</a></li><li><a href="https://www.zhihu.com/tardis/bd/art/652236935?source_id=1001" target="_blank" rel="noreferrer">自己搭建前端监控</a></li><li><a href="https://juejin.cn/post/7148364027817623589?searchId=20240417111137D4CB8479F8019A64225E" target="_blank" rel="noreferrer">使用 Sentry 做性能监控 - 原理篇</a></li><li><a href="https://www.jianshu.com/p/463ad4205782" target="_blank" rel="noreferrer">使用Sentry错误监控实践</a></li><li><a href="https://blog.csdn.net/qq_33592641/article/details/137684052" target="_blank" rel="noreferrer">线上问题监控 Sentry 接入全过程</a></li></ul><h2 id="方案选择" tabindex="-1">方案选择 <a class="header-anchor" href="#方案选择" aria-label="Permalink to &quot;方案选择&quot;">​</a></h2><p><strong>方案备选</strong></p><ul><li>自研 <ul><li>尝试接入 @web-tracing/vue 这个插件，感觉是挺好用的，但是团队人力有限，后续可视化系统的开发和数据清洗工作比较困难，故放弃。</li></ul></li><li>接入第三方 <ul><li>sentry</li><li>fundebug</li><li>frontjs</li><li>webfunny</li><li>GrowingIO</li><li>....</li></ul></li></ul><p>因此，综合考虑下来还是决定使用第三方，由于资金问题，sentry免费且功能完全够用。 <a href="https://zhuanlan.zhihu.com/p/685343532" target="_blank" rel="noreferrer">前端异常监控平台对比</a></p><p><strong>Sentry</strong></p><p>具有有如下优点：</p><ul><li>开源</li><li>前后端都支持</li><li>广泛的语言和框架支持</li><li>支持 SourceMap，这在前端打包压缩混淆代码的时候很方便我们定位问题</li><li>...</li></ul><p><strong>使用方式</strong></p><ul><li>sass：最方便的使用方式，只是官方提供的saas免费版只支持每天5000个event</li><li>私有化部署：需要占用自己服务器的资源空间，但数据都存在本地，相对更安全</li></ul><h2 id="sentry-私有化部署" tabindex="-1">sentry 私有化部署 <a class="header-anchor" href="#sentry-私有化部署" aria-label="Permalink to &quot;sentry 私有化部署&quot;">​</a></h2><ul><li>通过Python安装 <a href="https://develop.sentry.dev/self-hosted/" target="_blank" rel="noreferrer">教程地址</a></li><li>通过Docker容器安装 <a href="https://develop.sentry.dev/self-hosted/" target="_blank" rel="noreferrer">教程地址</a></li></ul><h3 id="安装教程" tabindex="-1">安装教程 <a class="header-anchor" href="#安装教程" aria-label="Permalink to &quot;安装教程&quot;">​</a></h3><p><a href="https://blog.csdn.net/qq_35323561/article/details/126783063" target="_blank" rel="noreferrer">Docker搭建Sentry</a></p><h3 id="docker进行搭建" tabindex="-1">Docker进行搭建 <a class="header-anchor" href="#docker进行搭建" aria-label="Permalink to &quot;Docker进行搭建&quot;">​</a></h3><p><strong>1、docker、docker-compose安装。</strong></p><p>安装很简单，我是在linux上使用yum安装的，很方便。</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">yum install docker -y</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">yum install docker-compose -y</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">// 查看版本信息</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">docker info</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">或者</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">docker -v</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">yum install docker -y</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">yum install docker-compose -y</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">// 查看版本信息</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">docker info</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">或者</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">docker -v</span></span></code></pre></div><p><strong>2、sentry安装。</strong></p><p>修改sentry默认配置（如果需要的话 ）- <a href="https://www.jianshu.com/p/bd331af3cfb9" target="_blank" rel="noreferrer">Sentry部署</a></p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">// 两种安装方式亲测都能用</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">// 新的安装方式</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">VERSION=&quot;24.1.0&quot;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">git clone https://github.com/getsentry/self-hosted.git</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">cd self-hosted</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">git checkout \${VERSION}</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">sudo ./install.sh</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">// 老的安装方式</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">git clone https://github.com/getsentry/onpremise.git</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">sudo ./install.sh</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">// 两种安装方式亲测都能用</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">// 新的安装方式</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">VERSION=&quot;24.1.0&quot;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">git clone https://github.com/getsentry/self-hosted.git</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">cd self-hosted</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">git checkout \${VERSION}</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">sudo ./install.sh</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">// 老的安装方式</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">git clone https://github.com/getsentry/onpremise.git</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">sudo ./install.sh</span></span></code></pre></div><p>清理数据</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">// 查看内存情况</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">docker system df -v</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">// 查看内存情况</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">docker system df -v</span></span></code></pre></div><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">//进入容器中</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">sudo docker exec -it sentry-self-hosted-postgres-1 /bin/bash</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">//登录postgres数据库 -- 具体的账户名与密码在/senty/sentry.conf.example.py文件</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">psql postgres postgres</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">//查看表大小</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">select pg_size_pretty(pg_relation_size(&#39;nodestore_node&#39;));</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">//删除一周前的数据，删除不会直接释放磁盘，这里的删除你可以理解为假删，只是做了个标记；1 week是一周，根据你需求修改</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">DELETE FROM nodestore_node WHERE timestamp &lt; (now() - interval &#39;1 week&#39;);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">//清理并释放磁盘空间，真正的删了</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">VACUUM FULL public.nodestore_node;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">vacuumdb -U postgres -d postgres -v -f --analyze</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">//自动清理</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">//通过crontab -e添加定时任务如下：</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">0 0 * * * docker exec -it sentry-self-hosted-sentry-cleanup-1 sentry cleanup --days 14 &amp;&amp; docker exec -it sentry-self-hosted-postgres-1 vacuumdb -U postgres -d postgres -v -f --analyze</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">// 使用 crontab 在linux实现定时任务</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">crontab -e</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">0 0 * * *  docker exec -it onpremise_web_1 sentry cleanup --days 7  &amp;&amp; docker exec -it onpremise_postgres_1 vacuumdb -U postgres -d postgres -v -f --analyze</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">//进入容器中</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">sudo docker exec -it sentry-self-hosted-postgres-1 /bin/bash</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">//登录postgres数据库 -- 具体的账户名与密码在/senty/sentry.conf.example.py文件</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">psql postgres postgres</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">//查看表大小</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">select pg_size_pretty(pg_relation_size(&#39;nodestore_node&#39;));</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">//删除一周前的数据，删除不会直接释放磁盘，这里的删除你可以理解为假删，只是做了个标记；1 week是一周，根据你需求修改</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">DELETE FROM nodestore_node WHERE timestamp &lt; (now() - interval &#39;1 week&#39;);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">//清理并释放磁盘空间，真正的删了</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">VACUUM FULL public.nodestore_node;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">vacuumdb -U postgres -d postgres -v -f --analyze</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">//自动清理</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">//通过crontab -e添加定时任务如下：</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">0 0 * * * docker exec -it sentry-self-hosted-sentry-cleanup-1 sentry cleanup --days 14 &amp;&amp; docker exec -it sentry-self-hosted-postgres-1 vacuumdb -U postgres -d postgres -v -f --analyze</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">// 使用 crontab 在linux实现定时任务</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">crontab -e</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">0 0 * * *  docker exec -it onpremise_web_1 sentry cleanup --days 7  &amp;&amp; docker exec -it onpremise_postgres_1 vacuumdb -U postgres -d postgres -v -f --analyze</span></span></code></pre></div><h3 id="服务器部署相关" tabindex="-1">服务器部署相关 <a class="header-anchor" href="#服务器部署相关" aria-label="Permalink to &quot;服务器部署相关&quot;">​</a></h3><p><strong>启动容器</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">cd</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/usr/local/docker/sentry</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}"># 第一次启动</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#B392F0" })}">./install.sh</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}"># 非第一次启动</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">cd</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/usr/local/docker/sentry/self-hosted</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#B392F0" })}">docker-compose</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">up</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">-d</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#005CC5" })}">cd</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">/usr/local/docker/sentry</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}"># 第一次启动</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">./install.sh</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}"># 非第一次启动</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#005CC5" })}">cd</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">/usr/local/docker/sentry/self-hosted</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">docker-compose</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">up</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">-d</span></span></code></pre></div><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">停止所有运行中的容器：</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">docker stop $(docker ps -q)</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">删除所有停止的容器：</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">docker rm $(docker ps -aq)</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">如果你想一步完成停止并删除所有容器，可以使用以下命令：</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">docker container prune -f</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">这个命令会删除所有停止的容器，而不是所有容器。如果你想删除所有容器，包括正在运行的，可以使用：</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">docker rm $(docker ps -aq) -f</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">停止所有运行中的容器：</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">docker stop $(docker ps -q)</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">删除所有停止的容器：</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">docker rm $(docker ps -aq)</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">如果你想一步完成停止并删除所有容器，可以使用以下命令：</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">docker container prune -f</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">这个命令会删除所有停止的容器，而不是所有容器。如果你想删除所有容器，包括正在运行的，可以使用：</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">docker rm $(docker ps -aq) -f</span></span></code></pre></div><p><strong>查看磁盘映射</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#B392F0" })}">docker</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">volume</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">ls</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">docker</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">volume</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">ls</span></span></code></pre></div><p><strong>删除所有以sentry开头的镜像</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#B392F0" })}">docker</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">stop</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">$(</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">docker</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}"> ps </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">-aq</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">--filter</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}"> name=sentry)</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> &amp;&amp; </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">docker</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">rm</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">$(</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">docker</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}"> ps </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">-aq</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">--filter</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}"> name=sentry)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">docker</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">stop</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">$(</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">docker</span><span style="${ssrRenderStyle({ "color": "#032F62" })}"> ps </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">-aq</span><span style="${ssrRenderStyle({ "color": "#032F62" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">--filter</span><span style="${ssrRenderStyle({ "color": "#032F62" })}"> name=sentry)</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> &amp;&amp; </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">docker</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">rm</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">$(</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">docker</span><span style="${ssrRenderStyle({ "color": "#032F62" })}"> ps </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">-aq</span><span style="${ssrRenderStyle({ "color": "#032F62" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">--filter</span><span style="${ssrRenderStyle({ "color": "#032F62" })}"> name=sentry)</span></span></code></pre></div><h3 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h3><p>npm install --save @sentry/vue @sentry/tracing</p><h3 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h3><p>main.js</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#F97583" })}">import</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">*</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">as</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> Sentry </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">from</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&quot;@sentry/vue&quot;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#F97583" })}">import</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> { Integrations } </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">from</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&quot;@sentry/tracing&quot;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">Sentry.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">init</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    app, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 这个是项目的app</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    dsn: </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&quot;&quot;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 这个是sentry项目的dsn地址</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    release: </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&quot;v0.1.0&quot;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 项目版本，用于sourceMap的匹配</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    integrations: [</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">new</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> Integrations.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">BrowserTracing</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">            routingInstrumentation: Sentry.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">vueRouterInstrumentation</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(router),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">            tracingOrigins: [</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&quot;localhost&quot;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span><span style="${ssrRenderStyle({ "color": "#DBEDFF" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">^</span><span style="${ssrRenderStyle({ "color": "#85E89D", "font-weight": "bold" })}">\\/</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">],</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        }),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// new SentryRRWeb({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//   checkoutEveryNms: 10 * 1000, // 每10秒重新制作快照</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//   checkoutEveryNth: 200, // 每 200 个 event 重新制作快照</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//   maskAllInputs: false, // 将所有输入内容记录为 *</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// }),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    ],</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 屏蔽掉一些无意义的上报</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    ignoreErrors: [</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#DBEDFF" })}">ResizeObserver loop limit exceeded</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">i</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 这个是由于element-plus的table组件的重绘功能导致</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#DBEDFF" })}">The play() request was interrupted by a new load request</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">i</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#DBEDFF" })}">The play() request was interrupted by a call to pause()</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">i</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#DBEDFF" })}">Cannot read properties of undefined (reading &#39;Vue&#39;)</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">i</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 原因未知，怀疑是和cdn资源有关</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    ],</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// Set tracesSampleRate to 1.0 to capture 100%</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// of transactions for performance monitoring.</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// We recommend adjusting this value in production</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    tracesSampleRate: </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">1.0</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 错误上报率，为1则是100%上报</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    logErrors: </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">true</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">});</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">window.$sentry </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> Sentry </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 添加sentry用于主动上报</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#D73A49" })}">import</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">*</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">as</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> Sentry </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">from</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&quot;@sentry/vue&quot;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#D73A49" })}">import</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> { Integrations } </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">from</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&quot;@sentry/tracing&quot;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">Sentry.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">init</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    app, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 这个是项目的app</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    dsn: </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&quot;&quot;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 这个是sentry项目的dsn地址</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    release: </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&quot;v0.1.0&quot;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 项目版本，用于sourceMap的匹配</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    integrations: [</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">new</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> Integrations.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">BrowserTracing</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">            routingInstrumentation: Sentry.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">vueRouterInstrumentation</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(router),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">            tracingOrigins: [</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&quot;localhost&quot;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span><span style="${ssrRenderStyle({ "color": "#032F62" })}"> /</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">^</span><span style="${ssrRenderStyle({ "color": "#22863A", "font-weight": "bold" })}">\\/</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">/</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">],</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        }),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// new SentryRRWeb({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//   checkoutEveryNms: 10 * 1000, // 每10秒重新制作快照</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//   checkoutEveryNth: 200, // 每 200 个 event 重新制作快照</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//   maskAllInputs: false, // 将所有输入内容记录为 *</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// }),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    ],</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 屏蔽掉一些无意义的上报</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    ignoreErrors: [</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">/ResizeObserver loop limit exceeded/</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">i</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 这个是由于element-plus的table组件的重绘功能导致</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">/The play() request was interrupted by a new load request/</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">i</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">/The play() request was interrupted by a call to pause()/</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">i</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">/Cannot read properties of undefined (reading &#39;Vue&#39;)/</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">i</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 原因未知，怀疑是和cdn资源有关</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    ],</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// Set tracesSampleRate to 1.0 to capture 100%</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// of transactions for performance monitoring.</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// We recommend adjusting this value in production</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    tracesSampleRate: </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">1.0</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 错误上报率，为1则是100%上报</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    logErrors: </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">true</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">});</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">window.$sentry </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> Sentry </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 添加sentry用于主动上报</span></span></code></pre></div><h3 id="主动上报" tabindex="-1">主动上报 <a class="header-anchor" href="#主动上报" aria-label="Permalink to &quot;主动上报&quot;">​</a></h3><p>在对接完成之后，sentry只能监控日常程序运行中的错误，对于异步请求的错误并不能监控到，这就意味着所有的接口请求如果出现问题，sentry是没法监控到的，这时候就需要我们主动上报</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">/*</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">    error参数为axios请求失败的返回error对象</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">*/</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#F97583" })}">const</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">requestErrorCapture</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">function</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">error</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  window.$sentry?.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">withScope</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">function</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">scope</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    scope.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">setTag</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&quot;request-url&quot;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, error.response?.config?.baseURL </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">+</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> error.response?.config?.url </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">||</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    window.$sentry?.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">captureException</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">?.(error, {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      contexts: {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        message: {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          url: error.response?.config?.baseURL </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">+</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> error.response?.config?.url,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          data: error.response?.config?.data,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          params: error.response?.config?.params,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          method: error.response?.config?.method,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          status: error.response?.status,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          statusText: error.response?.statusText,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          responseData: </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">JSON</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">stringify</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(error.response?.data),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        },</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">/*</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">    error参数为axios请求失败的返回error对象</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">*/</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#D73A49" })}">const</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">requestErrorCapture</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">function</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">error</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  window.$sentry?.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">withScope</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">function</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">scope</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    scope.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">setTag</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&quot;request-url&quot;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, error.response?.config?.baseURL </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">+</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> error.response?.config?.url </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">||</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    window.$sentry?.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">captureException</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">?.(error, {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      contexts: {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        message: {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          url: error.response?.config?.baseURL </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">+</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> error.response?.config?.url,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          data: error.response?.config?.data,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          params: error.response?.config?.params,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          method: error.response?.config?.method,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          status: error.response?.status,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          statusText: error.response?.statusText,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          responseData: </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">JSON</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">stringify</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(error.response?.data),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        },</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">}</span></span></code></pre></div><h3 id="上传sourcemap" tabindex="-1">上传sourceMap <a class="header-anchor" href="#上传sourcemap" aria-label="Permalink to &quot;上传sourceMap&quot;">​</a></h3><ul><li>利用 @sentry/cli 手动上传，不推荐，因为麻烦</li><li>利用插件自动在打包项目时上传sourcemap，推荐，因为省心且与ci/cd高度契合</li></ul><p>项目中采用插件的方式：项目打包时上传sourceMap到sentry后台</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#B392F0" })}">npm</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">install</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">-D</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">@sentry/webpack-plugin</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">npm</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">install</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">-D</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">@sentry/webpack-plugin</span></span></code></pre></div><p>项目根目录增加一个.sentryclirc文件</p><ul><li>url是sentry的后台地址</li><li>org在设置-组织中查看</li><li>project是项目名称</li><li>token：头像-user auth tokens 中生成</li></ul><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">[defaults]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">url=xxx</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">org=sentry</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">project=dbquery-web</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">[auth]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#e1e4e8" })}">token=49dc6655e749459ba709d8655994336a93ed01eebe03454c8f19f71a13cf5bbc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">[defaults]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">url=xxx</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">org=sentry</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">project=dbquery-web</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}"></span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">[auth]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292e" })}">token=49dc6655e749459ba709d8655994336a93ed01eebe03454c8f19f71a13cf5bbc</span></span></code></pre></div><h2 id="封装" tabindex="-1">封装 <a class="header-anchor" href="#封装" aria-label="Permalink to &quot;封装&quot;">​</a></h2><p>在main.js同级新增 sentry.js 文件</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#F97583" })}">import</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">*</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">as</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> Sentry </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">from</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&quot;@sentry/vue&quot;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 导出一个对象，其中包含 \`install\` 和其他方法</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#F97583" })}">export</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">default</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// \`install\` 方法用于将插件安装到 Vue</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">install</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">Vue</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">options</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">this</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">init</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(Vue, options);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 在 Vue 实例上挂载 Sentry 对象</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">Vue</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">prototype</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.$sentry </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> Sentry;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 在 Vue 实例上挂载自定义的错误捕获方法</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">Vue</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">prototype</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.$httpSentryCaptureMessage </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">this</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.httpSentryCaptureMessage;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">Vue</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">prototype</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.$captureMessage </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">this</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.captureMessage;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  },</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 初始化 Sentry，并配置相关选项</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">init</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">Vue</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, {</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">router</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">}) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 初始化 Sentry，配置 DSN、环境、调试模式等</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    Sentry.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">init</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        Vue,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        dsn: p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">VUE_APP_SENTRY_DSN</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        release: p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">VUE_APP_RELEASE</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 与 vue.config 中的保持一致</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        environment: p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">VUE_APP_CURRENTENV</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        debug: </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">true</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// http:{&quot;verify_ssl&quot;: false},</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        integrations: [</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 启用浏览器性能追踪</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          Sentry.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">browserTracingIntegration</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">({ router }),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 设置会话回放的配置</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          Sentry.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">replayIntegration</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">            maskAllText: </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">true</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 是否屏蔽所有文本内容</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">            blockAllMedia: </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">true</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 是否阻止所有媒体内容的回放</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">            networkDetailAllowUrls: [window.location.origin], </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 请求和响应标头或正文的允许 URL 列表</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          }),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        ],</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        initialScope: {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 可以在这里设置初始的 Scope 信息</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// level: &quot;info&quot;,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        },</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 在每次发送 event 前触发的钩子函数</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">beforeSend</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">event</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// event.level = &quot;warning&quot;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          event.tags.location </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> window.location.href;</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">return</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> event;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        },</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 设置分布式追踪的目标 URL</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        tracePropagationTargets: [],</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 性能监控配置</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        tracesSampleRate: </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">1.0</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 采集 100% 的事务</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 会话回放配置</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        replaysSessionSampleRate: </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">0.1</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 设置采样率为 10%。在开发时可能希望设置为 100%，然后在生产中采样率更低。</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        replaysOnErrorSampleRate: </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">1.0</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 如果你不是已经采样了整个会话，在错误发生时改变采样率到 100%。</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  },</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">/**</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * 主动上报捕获的异常。</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">@param</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">{ string }</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">title</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 异常标识</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">@param</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">{ object }</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">params</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 额外参数</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">@param</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">{ object }</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">stack</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 错误对象或微信返回对象</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   */</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">async</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">captureMessage</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">title</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">params</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">stack</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {}) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">try</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 判断错误类型并上报</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">const</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">isError</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">typeof</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> stack </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">===</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;object&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">&amp;&amp;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">!!</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">stack.stack;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">const</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">errorName</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (isError </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">?</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> stack.message </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">:</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> stack.errMsg) </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">||</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;unknown&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">const</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">extra</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        params,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        errMsg: isError </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">?</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> stack </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">:</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> stack.errMsg </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">||</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        href: location.href,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      };</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 使用 Sentry 上报错误</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      Sentry.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">withScope</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">((</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">scope</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        scope.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">setFingerprint</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">([title, errorName]);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">const</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">errMessage</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">new</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">Error</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(errorName);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        errMessage.name </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">\`前端异常上报:\${</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">title</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">}\`</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        console.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">log</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;前端异常：&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, title);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        Sentry.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">captureException</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(errMessage, {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          extra,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          level: </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;error&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    } </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">catch</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (error) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      console.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">log</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;sentry:&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, error);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  },</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">/**</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * 上报服务请求异常。</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">@param</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">{*}</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">stack</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 错误信息对象</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   */</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">async</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">httpSentryCaptureMessage</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">stack</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">try</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 处理服务请求异常，决定是否上报</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">const</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">errorMsg</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> stack.message;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">const</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">errorCode</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (stack.response </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">&amp;&amp;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> stack.response.status) </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">||</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">0</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">if</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> ([</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">401</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">403</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">40301</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">].</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">includes</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(errorCode)) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 过滤特定的凭证错误</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">return</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      }</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 根据错误信息和状态码设置错误名称</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">let</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> errorName;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">if</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#DBEDFF" })}">timeout</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">i</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">test</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(errorMsg) </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">||</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> errorCode</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">===</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">504</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        errorName </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;接口超时&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      } </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">else</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">if</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">^</span><span style="${ssrRenderStyle({ "color": "#DBEDFF" })}">4</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">\\d</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">{2}$</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">test</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(errorCode) </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">||</span><span style="${ssrRenderStyle({ "color": "#DBEDFF" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">^</span><span style="${ssrRenderStyle({ "color": "#DBEDFF" })}">5</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">\\d</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">{2}$</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">/</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">test</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(errorCode)) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        errorName </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">\`服务端\${</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">errorCode</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">}错误\`</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      } </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">else</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        errorName </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;调用异常&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      }</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">const</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">extra</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">...</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(stack.config </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">||</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {}),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        errMsg: stack,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        href: location.href,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      };</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 如果是接口超时，上报接口的参数</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      errorName </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">===</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;接口超时&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">&amp;&amp;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (extra.networkInfo </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">await</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">this</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">getResourceLoad</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;xmlhttprequest&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, extra.url));</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 使用 Sentry 上报异常</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      Sentry.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">withScope</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">((</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">scope</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        scope.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">setFingerprint</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">([extra.method, extra.url, errorName]);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">const</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">errMessage</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">new</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">Error</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">\`异常接口地址: \${</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">extra</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">.</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">url</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">}\`</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        errMessage.name </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> errorName;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        Sentry.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">captureException</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(errMessage, {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          extra,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          level: </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;error&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    } </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">catch</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (error) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      console.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">log</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;sentry:&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, error);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  },</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">/**</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * 获取资源加载信息。</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">@param</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">{ string }</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">type</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 资源类型</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">@param</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">{ string }</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">name</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 资源名称匹配</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">@returns</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">{ Promise&lt;Object&gt; }</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 返回资源信息的 Promise 对象</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   */</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">getResourceLoad</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">type</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;xmlhttprequest&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">name</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">return</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">new</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">Promise</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">((</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">resolve</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">if</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">!</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">window.performance) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">resolve</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">({});</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">return</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">setTimeout</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(() </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 获取并过滤性能监测中的资源信息</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">const</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">list</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> window.performance.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">getEntries</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">().</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">filter</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">((</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">item</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> item.initiatorType </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">===</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> type) </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">||</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> [];</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">if</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">!</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">name) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">resolve</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(list);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">return</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        }</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 查找匹配资源信息</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">let</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> result </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {};</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">for</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">let</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> i </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> list.</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">length</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">-</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">1</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">; i </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">&gt;=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">0</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">; i </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">-=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">1</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">if</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> (list[i].name </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">&amp;&amp;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> list[i].name.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">indexOf</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(name) </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">&gt;=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">0</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">            result </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> list[i];</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">            </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">break</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">resolve</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(result);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      }, </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">50</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">    });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  }</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#D73A49" })}">import</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">*</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">as</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> Sentry </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">from</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&quot;@sentry/vue&quot;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 导出一个对象，其中包含 \`install\` 和其他方法</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#D73A49" })}">export</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">default</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// \`install\` 方法用于将插件安装到 Vue</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">install</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">Vue</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#E36209" })}">options</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">this</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">init</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(Vue, options);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 在 Vue 实例上挂载 Sentry 对象</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">Vue</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">prototype</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.$sentry </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> Sentry;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 在 Vue 实例上挂载自定义的错误捕获方法</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">Vue</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">prototype</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.$httpSentryCaptureMessage </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">this</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.httpSentryCaptureMessage;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">Vue</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">prototype</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.$captureMessage </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">this</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.captureMessage;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  },</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 初始化 Sentry，并配置相关选项</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">init</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">Vue</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, {</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">router</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">}) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 初始化 Sentry，配置 DSN、环境、调试模式等</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    Sentry.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">init</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        Vue,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        dsn: p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">VUE_APP_SENTRY_DSN</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        release: p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">VUE_APP_RELEASE</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 与 vue.config 中的保持一致</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        environment: p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">VUE_APP_CURRENTENV</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        debug: </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">true</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// http:{&quot;verify_ssl&quot;: false},</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        integrations: [</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 启用浏览器性能追踪</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          Sentry.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">browserTracingIntegration</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">({ router }),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 设置会话回放的配置</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          Sentry.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">replayIntegration</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">            maskAllText: </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">true</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 是否屏蔽所有文本内容</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">            blockAllMedia: </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">true</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 是否阻止所有媒体内容的回放</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">            networkDetailAllowUrls: [window.location.origin], </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 请求和响应标头或正文的允许 URL 列表</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          }),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        ],</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        initialScope: {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 可以在这里设置初始的 Scope 信息</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// level: &quot;info&quot;,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        },</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 在每次发送 event 前触发的钩子函数</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">beforeSend</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">event</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// event.level = &quot;warning&quot;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          event.tags.location </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> window.location.href;</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">return</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> event;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        },</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 设置分布式追踪的目标 URL</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        tracePropagationTargets: [],</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 性能监控配置</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        tracesSampleRate: </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">1.0</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 采集 100% 的事务</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 会话回放配置</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        replaysSessionSampleRate: </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">0.1</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 设置采样率为 10%。在开发时可能希望设置为 100%，然后在生产中采样率更低。</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        replaysOnErrorSampleRate: </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">1.0</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 如果你不是已经采样了整个会话，在错误发生时改变采样率到 100%。</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  },</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">/**</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * 主动上报捕获的异常。</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">@param</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">{ string }</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#24292E" })}">title</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 异常标识</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">@param</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">{ object }</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#24292E" })}">params</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 额外参数</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">@param</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">{ object }</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#24292E" })}">stack</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 错误对象或微信返回对象</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   */</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">async</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">captureMessage</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">title</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#E36209" })}">params</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#E36209" })}">stack</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {}) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">try</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 判断错误类型并上报</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">const</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">isError</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">typeof</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> stack </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">===</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;object&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">&amp;&amp;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">!!</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">stack.stack;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">const</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">errorName</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (isError </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">?</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> stack.message </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">:</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> stack.errMsg) </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">||</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;unknown&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">const</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">extra</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        params,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        errMsg: isError </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">?</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> stack </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">:</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> stack.errMsg </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">||</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        href: location.href,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      };</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 使用 Sentry 上报错误</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      Sentry.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">withScope</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">((</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">scope</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        scope.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">setFingerprint</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">([title, errorName]);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">const</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">errMessage</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">new</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">Error</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(errorName);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        errMessage.name </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">\`前端异常上报:\${</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">title</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">}\`</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        console.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">log</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;前端异常：&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, title);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        Sentry.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">captureException</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(errMessage, {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          extra,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          level: </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;error&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    } </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">catch</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (error) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      console.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">log</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;sentry:&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, error);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  },</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">/**</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * 上报服务请求异常。</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">@param</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">{*}</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#24292E" })}">stack</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 错误信息对象</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   */</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">async</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">httpSentryCaptureMessage</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">stack</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">try</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 处理服务请求异常，决定是否上报</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">const</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">errorMsg</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> stack.message;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">const</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">errorCode</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (stack.response </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">&amp;&amp;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> stack.response.status) </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">||</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">0</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">if</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> ([</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">401</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">403</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">40301</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">].</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">includes</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(errorCode)) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 过滤特定的凭证错误</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">return</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      }</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 根据错误信息和状态码设置错误名称</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">let</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> errorName;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">if</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">/timeout/</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">i</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">test</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(errorMsg) </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">||</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> errorCode</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">===</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">504</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        errorName </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;接口超时&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      } </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">else</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">if</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">/</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">^</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">4</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">\\d</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">{2}$</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">/</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">test</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(errorCode) </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">||</span><span style="${ssrRenderStyle({ "color": "#032F62" })}"> /</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">^</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">5</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">\\d</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">{2}$</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">/</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">test</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(errorCode)) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        errorName </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">\`服务端\${</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">errorCode</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">}错误\`</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      } </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">else</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        errorName </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;调用异常&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      }</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">const</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">extra</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">...</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(stack.config </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">||</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {}),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        errMsg: stack,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        href: location.href,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      };</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 如果是接口超时，上报接口的参数</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      errorName </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">===</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;接口超时&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">&amp;&amp;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (extra.networkInfo </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">await</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">this</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">getResourceLoad</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;xmlhttprequest&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, extra.url));</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 使用 Sentry 上报异常</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      Sentry.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">withScope</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">((</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">scope</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        scope.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">setFingerprint</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">([extra.method, extra.url, errorName]);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">const</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">errMessage</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">new</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">Error</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">\`异常接口地址: \${</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">extra</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">.</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">url</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">}\`</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        errMessage.name </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> errorName;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        Sentry.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">captureException</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(errMessage, {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          extra,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          level: </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;error&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    } </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">catch</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (error) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      console.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">log</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;sentry:&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, error);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  },</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">/**</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * 获取资源加载信息。</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">@param</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">{ string }</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#24292E" })}">type</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 资源类型</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">@param</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">{ string }</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#24292E" })}">name</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 资源名称匹配</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   * </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">@returns</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">{ Promise&lt;Object&gt; }</span><span style="${ssrRenderStyle({ "color": "#6A737D" })}"> 返回资源信息的 Promise 对象</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">   */</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">getResourceLoad</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">type</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;xmlhttprequest&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#E36209" })}">name</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">return</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">new</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">Promise</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">((</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">resolve</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">if</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">!</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">window.performance) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">resolve</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">({});</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">return</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">setTimeout</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(() </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 获取并过滤性能监测中的资源信息</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">const</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">list</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> window.performance.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">getEntries</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">().</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">filter</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">((</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">item</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> item.initiatorType </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">===</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> type) </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">||</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> [];</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">if</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">!</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">name) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">resolve</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(list);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">return</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        }</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 查找匹配资源信息</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">let</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> result </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {};</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">for</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">let</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> i </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> list.</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">length</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">-</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">1</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">; i </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">&gt;=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">0</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">; i </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">-=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">1</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">if</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> (list[i].name </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">&amp;&amp;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> list[i].name.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">indexOf</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(name) </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">&gt;=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">0</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">            result </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> list[i];</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">            </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">break</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">resolve</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(result);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      }, </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">50</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">    });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  }</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">}</span></span></code></pre></div><p>main.js中引入</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">import</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> SentryReport </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">from</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;./sentry.js&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">if</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">VUE_APP_CURRENTENV</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">!=</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;DEV&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">){</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">       </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 开发时引入，会导致控制台输出内容不能指定到所在行，所以打包时才引入</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">       Vue.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">use</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(SentryReport, {router})</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">   }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">import</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> SentryReport </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">from</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;./sentry.js&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">if</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">VUE_APP_CURRENTENV</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">!=</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;DEV&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">){</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">       </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 开发时引入，会导致控制台输出内容不能指定到所在行，所以打包时才引入</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">       Vue.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">use</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(SentryReport, {router})</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">   }</span></span></code></pre></div><p>在vue.config.js中加入configureWebpack的配置</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#B392F0" })}">configureWebpack</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">: (</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">config</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//产生map文件</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        config.devtool</span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;source-map&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">if</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">VUE_APP_CURRENTENV</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">!=</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;DEV&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">){</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          Object.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">assign</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(config, {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">              plugins: [</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">...</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">config.plugins,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">sentryWebpackPlugin</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  url: </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&quot;https://test-sentry.scxljs.cn/&quot;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// Sentry 后台地址</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  release: p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">VUE_APP_RELEASE</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 和 Sentry.init 中的保持一致</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  include: path.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">join</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(process.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">cwd</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(), </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&quot;/dist&quot;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">), </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 需要上传到 sentry 服务器的资源目录</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  ignore: [</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&quot;node_modules&quot;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&quot;vue.config.js&quot;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">], </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 忽略文件目录，如果在 inlcude 中已经定义了具体路径，这个参数可以不加</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  authToken: p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">VUE_APP_SENTRY_AUTH_TOKEN</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 上文中的 User auth tokens</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  org: </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;sentry&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 上文中的组织名称</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  project: </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;environment-assistant&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 上文中的项目名称</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  urlPrefix: </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&quot;./&quot;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 上传资源的路径前缀，路径通常是 /static/js, 如有变化自行更改</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  cleanArtifacts: </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">true</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 先清理再上传</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  debug: </span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">true</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  sourcemaps: {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// assets: [&#39;./dist&#39;],</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">           </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//上传后删除映射文件</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                    filesToDeleteAfterUpload: [</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;./dist/js/**/*.map&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, ]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  },</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  </span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">errorHandler</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">: (</span><span style="${ssrRenderStyle({ "color": "#FFAB70" })}">error</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">) </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                    console.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">log</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;upload SourceMap error&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">, error)</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                  },</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">                }),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">              ],</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">          });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">      },</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">configureWebpack</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">: (</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">config</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//产生map文件</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        config.devtool</span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;source-map&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">if</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">VUE_APP_CURRENTENV</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">!=</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;DEV&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">){</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          Object.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">assign</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(config, {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">              plugins: [</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">...</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">config.plugins,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">sentryWebpackPlugin</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  url: </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&quot;https://test-sentry.scxljs.cn/&quot;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// Sentry 后台地址</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  release: p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">VUE_APP_RELEASE</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 和 Sentry.init 中的保持一致</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  include: path.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">join</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(process.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">cwd</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(), </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&quot;/dist&quot;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">), </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 需要上传到 sentry 服务器的资源目录</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  ignore: [</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&quot;node_modules&quot;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&quot;vue.config.js&quot;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">], </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 忽略文件目录，如果在 inlcude 中已经定义了具体路径，这个参数可以不加</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  authToken: p<wbr>rocess.env.</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">VUE_APP_SENTRY_AUTH_TOKEN</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 上文中的 User auth tokens</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  org: </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;sentry&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 上文中的组织名称</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  project: </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;environment-assistant&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 上文中的项目名称</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  urlPrefix: </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&quot;./&quot;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 上传资源的路径前缀，路径通常是 /static/js, 如有变化自行更改</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  cleanArtifacts: </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">true</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 先清理再上传</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  debug: </span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">true</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  sourcemaps: {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                    </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// assets: [&#39;./dist&#39;],</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">           </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//上传后删除映射文件</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                    filesToDeleteAfterUpload: [</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;./dist/js/**/*.map&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, ]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  },</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  </span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">errorHandler</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">: (</span><span style="${ssrRenderStyle({ "color": "#E36209" })}">error</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">) </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=&gt;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                    console.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">log</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(</span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;upload SourceMap error&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">, error)</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                  },</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">                }),</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">              ],</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">          });</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">      },</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 首次拿到用户信息的地方设置用户信息</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#F97583" })}">let</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> userInfo </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        username:  res.data.userName </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">||</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;-1&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        id: res.data.userId </span><span style="${ssrRenderStyle({ "color": "#F97583" })}">||</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}"> </span><span style="${ssrRenderStyle({ "color": "#9ECBFF" })}">&#39;-1&#39;</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">        email: res.data.userName,  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//为方便辨识用户，将email设置为userName</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">}</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 给issue传递用户信息</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">this</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.$sentry.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">setUser</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(userInfo);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 主动上报异常</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//axios的请求响应拦截中： </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">Vue</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.</span><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">prototype</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">$httpSentryCaptureMessage</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(err)</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//业务场景中：</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#79B8FF" })}">this</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">.$sentry.</span><span style="${ssrRenderStyle({ "color": "#B392F0" })}">httpSentryCaptureMessage</span><span style="${ssrRenderStyle({ "color": "#E1E4E8" })}">(err);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 首次拿到用户信息的地方设置用户信息</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#D73A49" })}">let</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> userInfo </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">=</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        username:  res.data.userName </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">||</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;-1&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        id: res.data.userId </span><span style="${ssrRenderStyle({ "color": "#D73A49" })}">||</span><span style="${ssrRenderStyle({ "color": "#24292E" })}"> </span><span style="${ssrRenderStyle({ "color": "#032F62" })}">&#39;-1&#39;</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">        email: res.data.userName,  </span><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//为方便辨识用户，将email设置为userName</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#24292E" })}">}</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 给issue传递用户信息</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#005CC5" })}">this</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.$sentry.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">setUser</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(userInfo);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">// 主动上报异常</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//axios的请求响应拦截中： </span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#005CC5" })}">Vue</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.</span><span style="${ssrRenderStyle({ "color": "#005CC5" })}">prototype</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">$httpSentryCaptureMessage</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(err)</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#6A737D" })}">//业务场景中：</span></span>
<span class="line"><span style="${ssrRenderStyle({ "color": "#005CC5" })}">this</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">.$sentry.</span><span style="${ssrRenderStyle({ "color": "#6F42C1" })}">httpSentryCaptureMessage</span><span style="${ssrRenderStyle({ "color": "#24292E" })}">(err);</span></span></code></pre></div></div>`);
}
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("note/system/前端监控.md");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
const ____ = /* @__PURE__ */ _export_sfc(_sfc_main, [["ssrRender", _sfc_ssrRender]]);
export {
  __pageData,
  ____ as default
};
